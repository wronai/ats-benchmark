{
  "tool": "radon",
  "target_project": "/project",
  "tokens_in": 880,
  "tokens_out": 2214,
  "duration_analysis_sec": 73.1101496219635,
  "duration_llm_sec": 42.963855028152466,
  "duration_total_sec": 116.13091397285461,
  "context_chars": 2546,
  "raw_code_chars": 373650,
  "compression_ratio": 0.993186136758999,
  "llm_response": "Based on the Radon complexity analysis, here is a detailed code review focusing on the actual project code (excluding third-party dependencies in `venv/`):\n\n## 1. Critical Configuration Issue: Analysis Pollution\n\n**Bug**: The analysis includes `/project/build/lib/nfo/` alongside `/project/nfo/`, creating duplicate metric entries and skewing complexity distributions.\n- **Impact**: False duplication of complexity debt; build artifacts treated as source truth\n- **Fix**: Exclude `build/`, `dist/`, and `venv/` from Radon analysis via `setup.cfg` or `pyproject.toml`:\n```toml\n[tool.radon]\nexclude = \"venv,build,dist,*.egg-info\"\n```\n\n## 2. High-Risk Complexity Boundaries (CC=10)\n\nAll project-specific functions sit at CC=10, the threshold for \"high risk\" (CC > 10). These require immediate refactoring:\n\n### `nfo/configure.py:37` - `_parse_sink_spec()`\n**Issues**:\n- **Logic Error Risk**: Configuration parsing at complexity boundary suggests excessive conditional nesting for sink type detection (likely `if/elif` chains for kafka/file/http sinks)\n- **Security Concern**: Complex parsing logic often misses injection vectors in configuration strings\n- **Refactoring**: Apply **Strategy Pattern** - replace conditionals with a sink registry dictionary mapping types to handler classes\n\n### `nfo/extractors.py:52` - `extract_image_meta()`\n**Issues**:\n- **Data Flow Gap**: CC=10 for metadata extraction suggests format-specific branching (JPEG/PNG/RAW) without centralized validation\n- **Security Vulnerability**: Image parsers with high branching complexity are prone to malformed image exploits (OOM, infinite loops on crafted headers)\n- **Refactoring**: Extract format-specific logic into `ImageParser` subclasses; implement strict schema validation before parsing\n\n### `nfo/pipeline_sink.py:397` - `_render_data_flow()`\n**Issues**:\n- **Performance Bottleneck**: Rendering functions with CC=10 typically mix data transformation with presentation logic, causing redundant calculations\n- **Data Flow I...",
  "llm_quality_keywords": 16,
  "error": null,
  "metadata": {
    "metrics": [
      "cyclomatic_complexity",
      "maintainability_index",
      "raw_metrics",
      "halstead"
    ]
  }
}